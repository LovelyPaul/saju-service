# 사주 분석 서비스 PRD (Product Requirements Document)

## 1. 제품 개요

### 1.1 제품명
**사주 분석 서비스 (Saju Analysis Service)**

### 1.2 제품 비전
Google Gemini AI를 활용하여 사용자에게 전문적이고 상세한 사주 분석 서비스를 제공하는 웹 기반 플랫폼입니다. 전통적인 명리학과 최신 AI 기술을 결합하여 누구나 쉽게 접근할 수 있는 사주 분석 서비스를 구현합니다.

### 1.3 핵심 가치 제안
- **AI 기반 정확성**: Google Gemini 2.5 모델을 활용한 전문적인 사주 분석
- **합리적인 가격**: 무료 체험 3회 제공, Pro 요금제 월 3,900원
- **편리한 접근성**: Google 계정만으로 간편하게 시작
- **체계적인 관리**: 분석 내역 보관 및 검색 기능

### 1.4 목표
- 사용자가 자신의 사주를 AI를 통해 쉽고 빠르게 분석받을 수 있는 서비스 제공
- 무료 사용자를 통한 서비스 인지도 확보 및 Pro 요금제를 통한 수익화
- 간편한 구독 관리 및 결제 시스템 구축

## 2. Stakeholders

### 2.1 내부 Stakeholders
- **프로덕트 오너**: 제품 비전 및 우선순위 결정
- **개발팀**: 프론트엔드, 백엔드, API 연동 개발
- **디자인팀**: UI/UX 디자인, 브랜딩
- **마케팅팀**: 서비스 홍보, 사용자 확보
- **운영팀**: 고객 지원, 서비스 모니터링

### 2.2 외부 Stakeholders
- **사용자**:
  - 무료 사용자: 사주에 관심 있는 일반 사용자, 서비스 체험 목적
  - Pro 구독자: 정기적인 사주 분석이 필요한 사용자, 고품질 분석 요구
- **서비스 제공자**:
  - Google (Clerk, Gemini API)
  - 토스페이먼츠
  - Supabase

## 3. 타겟 사용자

### 3.1 Primary Target
- **연령**: 20-40대
- **특성**:
  - 사주, 운세에 관심이 있는 사용자
  - 디지털 서비스에 익숙한 사용자
  - Google 계정 보유자
- **니즈**:
  - 자신의 사주를 전문적으로 분석받고 싶음
  - 오프라인 사주 상담보다 저렴하고 편리한 방법 선호
  - 분석 결과를 언제든지 다시 확인하고 싶음

### 3.2 Secondary Target
- **연령**: 40-60대
- **특성**:
  - 전통적인 사주에 관심이 많은 사용자
  - 자녀, 가족의 사주를 함께 분석하고 싶은 사용자
- **니즈**:
  - 여러 사람의 사주를 체계적으로 관리
  - 상세하고 깊이 있는 분석 선호

## 4. 포함 페이지

### 4.1 페이지 구조
```
/                        - 홈 (랜딩페이지) [공개]
/sign-in                 - 로그인 페이지 [공개]
/sign-up                 - 회원가입 페이지 [공개]
/dashboard               - 대시보드 (분석 목록) [인증 필요]
/analysis/new            - 새 분석하기 [인증 필요]
/analysis/:id            - 분석 상세보기 [인증 필요]
/subscription            - 구독 관리 [인증 필요]
/subscription/upgrade    - Pro 요금제 업그레이드 [인증 필요]
/account                 - 계정 관리 (Clerk 제공) [인증 필요]
/success                 - 결제 성공 페이지 [인증 필요]
/fail                    - 결제 실패 페이지 [인증 필요]
```

## 5. 사용자 여정 (User Journey)

### 5.1 무료 사용자 (Free Tier User)

#### Segment: 서비스 체험 사용자
**페이지 흐름**:
1. **홈 페이지** (`/`)
   - 서비스 소개 확인
   - 무료 체험 혜택 확인
   - "시작하기" 버튼 클릭

2. **회원가입/로그인** (`/sign-up`, `/sign-in`)
   - Google 계정으로 간편 가입/로그인
   - Clerk SDK를 통한 인증 처리

3. **대시보드** (`/dashboard`)
   - 첫 방문 시: "아직 검사 이력이 없습니다" 메시지 표시
   - "새 검사하기" 버튼 표시
   - 남은 무료 검사 횟수 표시 (3회)

4. **새 분석하기** (`/analysis/new`)
   - 분석 대상 정보 입력 (이름, 생년월일, 출생시간, 성별)
   - "AI가 분석 중입니다..." 로딩 메시지
   - Gemini 2.5 Flash 모델로 분석 수행

5. **분석 상세보기** (`/analysis/:id`)
   - 상세한 사주 분석 결과 확인
   - 천간지지 정보 포함
   - 개인 특성, 재물, 건강, 연애운 등 해석

6. **구독 관리** (`/subscription`)
   - 현재 무료 사용자 상태 표시
   - 남은 검사 횟수 표시 (예: 1/3)
   - "Pro 요금제로 업그레이드" 버튼

**전환 시나리오**:
- 무료 횟수 소진 후 → Pro 요금제 업그레이드 유도

### 5.2 Pro 구독 사용자

#### Segment: 정기 사용자
**페이지 흐름**:
1. **구독 관리** (`/subscription`)
   - "Pro 요금제로 업그레이드" 버튼 클릭

2. **Pro 업그레이드** (`/subscription/upgrade`)
   - Pro 요금제 혜택 안내
     - 월 10회 분석 가능
     - Gemini 2.5 Pro 모델 사용
     - 3,900원/월
   - "주의, 구독 후 환불이 불가합니다." 문구 표시
   - "지금 업그레이드하기" 버튼 클릭

3. **결제 위젯** (토스페이먼츠)
   - 결제 정보 입력 (카드번호, 유효기간, 비밀번호, 주민번호 앞 7자리)
   - 개인/법인 카드 선택
   - 이용 약관 및 개인정보 처리 동의 체크
   - 결제 완료

4. **결제 성공** (`/success`)
   - 구독 완료 메시지
   - 대시보드로 이동

5. **대시보드** (`/dashboard`)
   - Pro 사용자 상태 표시
   - 이번 달 남은 분석 횟수 표시 (예: 8/10)
   - 과거 분석 목록 표시 및 검색 기능

6. **새 분석하기** (`/analysis/new`)
   - Gemini 2.5 Pro 모델로 더 상세한 분석 제공

7. **구독 관리** (`/subscription`)
   - 현재 Pro 구독 상태 표시
   - 다음 결제일 표시
   - "구독 취소" 버튼 (다음 결제일까지 유지)

## 6. Information Architecture (IA)

```
사주 분석 서비스
│
├── 공개 영역 (Public)
│   ├── 홈 (/)
│   │   ├── 히어로 섹션 (서비스 소개)
│   │   ├── 서비스 특징
│   │   ├── 요금제 비교
│   │   └── FAQ
│   ├── 로그인 (/sign-in)
│   └── 회원가입 (/sign-up)
│
└── 인증 영역 (Authenticated)
    ├── 대시보드 (/dashboard)
    │   ├── 구독 상태 표시
    │   ├── 분석 목록
    │   └── 검색 기능
    │
    ├── 분석 기능
    │   ├── 새 분석하기 (/analysis/new)
    │   │   ├── 정보 입력 폼
    │   │   ├── 로딩 화면
    │   │   └── 분석 결과
    │   └── 분석 상세보기 (/analysis/:id)
    │       ├── 사주팔자
    │       ├── 오행 분석
    │       ├── 십신 분석
    │       ├── 대운/세운 해석
    │       └── 종합 운세
    │
    ├── 구독 관리 (/subscription)
    │   ├── 현재 구독 정보
    │   ├── 남은 횟수/결제일
    │   ├── 업그레이드 (/subscription/upgrade)
    │   │   ├── 요금제 안내
    │   │   ├── 결제 위젯
    │   │   └── 결제 완료
    │   └── 구독 취소
    │
    └── 계정 관리 (/account)
        ├── 프로필 정보
        ├── 보안 설정
        └── 계정 삭제
```

## 7. 핵심 기능 요구사항

### 7.1 인증 및 사용자 관리 (Clerk SDK)

#### 7.1.1 Google 로그인
- **기능**: Google OAuth를 통한 간편 가입/로그인
- **구현**: Clerk SDK의 `<SignIn />`, `<SignUp />` 컴포넌트 사용
- **접근 제어**: 홈 페이지 제외 모든 페이지 인증 필수

#### 7.1.2 프로필 관리
- 이름, 이메일 조회 및 업데이트
- Username 변경
- 연결된 Google 계정 정보 확인

#### 7.1.3 보안 설정
- 비밀번호 설정/변경
- 활성 기기 목록 확인
- 계정 삭제

#### 7.1.4 Clerk Webhook 연동
- `user.created`: Supabase에 사용자 생성, `free_tier` 역할 할당, 무료 횟수 3회 설정
- `user.updated`: Supabase 사용자 정보 업데이트
- `user.deleted`: Supabase 사용자 삭제, 토스페이먼츠 구독 취소 트리거

### 7.2 사주 분석 기능 (Gemini API)

#### 7.2.1 새 분석하기
**입력 필드**:
- 이름 (필수)
- 생년월일 (필수, 음력/양력 선택)
- 출생시간 (선택, "모름" 옵션 제공)
- 성별 (필수, 남성/여성)
- 시간대 (선택, 예: Asia/Seoul, America/New_York)
- 추가 요청사항 (선택)

**프로세스**:
1. 입력값 검증
2. "AI가 분석 중입니다..." 로딩 표시
3. 사용자 구독 상태에 따라 모델 선택
   - 무료 사용자: `gemini-2.5-flash`
   - Pro 구독자: `gemini-2.5-pro`
4. `/prompt/saju-prompt.md`의 `generateSajuAnalysisPrompt` 함수를 사용하여 프롬프트 생성
5. Gemini API 호출하여 분석 수행
6. 분석 결과를 Supabase에 저장
7. 사용자 분석 횟수 차감
8. 분석 결과 페이지로 이동

#### 7.2.2 사주 분석 보고서

**AI 페르소나**:
- 25년 경력의 동양 철학 전문가
- 명리학(命理學) 기반 사주 분석 컨설턴트
- 고객의 삶에 긍정적인 통찰을 제공하는 것이 목표

**포함 내용**:

**1. 🌸 나의 원명(原命) 이해하기: 사주팔자(四柱八字)와 오행(五行) 분석**
- **천간(天干)과 지지(地支) 구성**:
  - 고객의 사주팔자(년, 월, 일, 시주)를 명확히 제시
  - 각 기둥의 의미와 상호 관계 설명
  - 출생시간 미상 시: 삼주(三柱) 기반 분석 명시

- **오행(五行)의 균형**:
  - 목(木), 화(火), 토(土), 금(金), 수(水) 오행의 분포와 강약 분석
  - 특정 오행의 과다/부족이 타고난 성향과 에너지 흐름에 미치는 영향

- **일간(日干) 분석**:
  - 일간이 상징하는 개인의 핵심적인 특성, 가치관, 강점 및 약점 해석

- **십신(十神) 분석**:
  - 비겁, 식상, 재성, 관성, 인성의 분포
  - 각 십신이 대인 관계, 직업적 특성, 재물관, 사회생활에 미치는 영향
  - 구체적인 사례를 들어 설명

**2. 🌟 삶의 흐름 읽기: 대운(大運)과 세운(歲運) 해석**
- **현재 대운(大運) 분석**:
  - 현재 경험하고 있는 대운의 시작 시점과 주된 에너지 흐름
  - 전반적인 삶의 방향성(직업, 관계, 환경 변화 등)에 미치는 영향

- **가까운 미래의 세운(歲運) 예측 (향후 3년)**:
  - 다가올 3년간의 세운 흐름을 년도별로 설명
  - 재물운, 건강운, 연애운, 학업/직업운에 미칠 영향 예측
  - 기회와 주의할 점 제시

- **조언**:
  - 변화하는 운의 흐름 속에서 취해야 할 현명한 태도와 준비 사항

**3. 🌱 나의 잠재력 발휘하기: 종합 운세 분석 및 맞춤 솔루션**
- **성격 및 적성 분석**:
  - 타고난 기질과 잠재된 재능 기반 성격 특성 심층 분석
  - 강점을 발휘할 수 있는 분야나 활동에 대한 통찰

- **재물운(財物運) 분석**:
  - 재물을 모으고 유지하는 방식, 투자 성향
  - 재물 관련 기회 및 도전 요소
  - 현명한 재테크 방향성 제시

- **직업/학업운(職業/學業運) 분석**:
  - 타고난 직업적 특성
  - 성공적인 직업 선택을 위한 조언
  - 이직, 승진, 창업 등 직업적 고민에 대한 통찰

- **연애/결혼운(戀愛/結婚運) 분석**:
  - 이상적인 배우자상, 연애 스타일
  - 관계에서 주의할 점
  - 건강하고 행복한 관계를 위한 조언 (미혼/기혼 무관)

- **건강운(健康運) 분석**:
  - 오행의 불균형 또는 사주 내 특정 기운이 건강에 미치는 영향
  - 예방 및 관리를 위한 생활 습관 개선 등 실질적인 조언

- **종합 조언 및 개운법(開運法)**:
  - 삶에 긍정적인 변화를 가져올 맞춤형 개운법
  - 생활 습관, 마음가짐, 환경 조성 등 실천 가능한 형태로 구체화

**출력 형식**:
- **형식**: Markdown
- **어조**: 친절하고 전문적이며, 희망적이고 긍정적인 통찰 제공
- **분량**: 각 섹션별로 충분한 설명과 예시 포함 (최소 A4 용지 2장 이상)

**금지 사항**:
- 의료·법률·금융 관련 확정적 조언 금지
- 확정적 미래 예측 금지 ('잠재력이 있습니다', '~하는 경향이 있습니다' 등 조심스러운 표현 사용)
- 부정적·공격적·비난조의 표현 금지
- 운명론적 접근 지양 (노력과 선택에 따라 변화 가능함을 강조)
- 과도한 미신적 요소 강조 금지

**마무리 메시지**:
"이 분석이 고객님의 삶의 지혜와 긍정적인 변화를 위한 소중한 나침반이 되기를 바랍니다. 궁금한 점이 있다면 언제든지 다시 문의해 주세요."

### 7.3 구독 및 결제 관리 (토스페이먼츠)

#### 7.3.1 구독 정책
**무료 요금제 (Free Tier)**:
- 가격: 0원
- 혜택: 최초 3회 무료 분석
- 모델: Gemini 2.5 Flash
- 제한: 3회 소진 시 추가 분석 불가

**Pro 요금제**:
- 가격: 3,900원/월
- 혜택: 월 10회 분석
- 모델: Gemini 2.5 Pro (더 상세한 분석)
- 갱신: 자동 정기결제 (Supabase Cron 기반)

#### 7.3.2 Pro 업그레이드 프로세스
1. "Pro 요금제로 업그레이드" 페이지 표시
2. 혜택 안내 (월 10회, Gemini Pro, 3,900원/월)
3. "주의, 구독 후 환불이 불가합니다." 경고 문구
4. 토스페이먼츠 결제 위젯 로드
5. 결제 정보 입력
   - 카드번호, 유효기간, 비밀번호, 주민번호 앞 7자리
   - 개인/법인 카드 선택
   - 이용 약관 동의
6. 결제 승인 및 빌링키 발급
7. Supabase 구독 상태 업데이트

#### 7.3.3 구독 관리
**표시 정보**:
- 현재 구독 상태 (무료/Pro)
- 무료 사용자: 남은 검사 횟수
- Pro 사용자: 이번 달 남은 횟수, 다음 결제일

**구독 취소 로직**:
- Pro 취소 시 다음 결제일까지 구독 유지
- 다음 결제일 전 재구독 가능
- 구독 해지 시 빌링키 삭제
- 재구독 시 SDK를 통한 빌링키 재발급

#### 7.3.4 토스페이먼츠 Webhook 연동
- `PAYMENT_STATUS_DONE`: 결제 성공, 구독 기간 연장
- `PAYMENT_STATUS_CANCELLED`: 결제 취소/환불, 구독 상태 변경
- `PAYMENT_STATUS_FAILED`: 결제 실패, 사용자에게 알림

#### 7.3.5 정기결제 자동화 (Supabase Cron)
**목적**: Pro 구독자의 월간 결제를 자동으로 처리하여 끊김 없는 서비스 제공

**구현 방식**:
- Supabase Cron을 이용한 스케줄링
- Next.js API 엔드포인트를 통한 결제 처리

**작동 플로우**:
1. **[Supabase Cron]** 매일 02:00 KST에 자동 실행
   - Cron Job이 Next.js API 엔드포인트 호출: `POST /api/cron/recurring-payments`
   - 요청 헤더에 인증 토큰 포함 (환경 변수 `CRON_SECRET`)

2. **[Next.js API]** 유효한 호출인지 검증
   - 헤더의 `Authorization: Bearer ${CRON_SECRET}` 검증
   - 검증 실패 시 HTTP 401 Unauthorized 반환

3. **[Next.js API]** 오늘이 결제일인 구독건 탐색
   - Supabase에서 다음 조건의 사용자 조회:
     ```sql
     SELECT * FROM users
     WHERE subscription_tier = 'pro'
       AND cancelled_at IS NULL
       AND DATE(subscription_ends_at) = CURRENT_DATE
     ```

4. **[Next.js API]** 각 구독건에 대해 결제 API 호출
   - `billing_keys` 테이블에서 사용자의 빌링키 조회
   - 토스페이먼츠 빌링키 결제 API 호출:
     ```typescript
     POST /v1/billing/{billingKey}
     {
       "customerKey": user.clerk_user_id,
       "amount": 3900,
       "orderId": "auto_renewal_{uuid}",
       "orderName": "사주 분석 서비스 Pro 구독 (자동갱신)"
     }
     ```

5. **[결제 성공 시]**
   - `payments` 테이블에 결제 레코드 INSERT
   - `users` 테이블 업데이트:
     - `subscription_ends_at`: 현재 만료일 + 30일
     - `analyses_remaining`: 10 (리셋)
   - 사용자에게 결제 성공 이메일 발송 (선택사항)

6. **[결제 실패 시]**
   - `payments` 테이블에 실패 레코드 INSERT (`status = 'failed'`)
   - 구독 즉시 해지:
     - `users` 테이블 업데이트:
       - `subscription_tier`: 'free'
       - `analyses_remaining`: 0
       - `subscription_ends_at`: NULL
     - `billing_keys` 테이블에서 빌링키 삭제
   - 사용자에게 결제 실패 및 구독 해지 이메일 발송

**에러 처리**:
- 개별 결제 실패가 전체 Cron Job을 중단시키지 않도록 try-catch 처리
- 각 결제 시도 결과를 로그에 기록
- 3회 이상 연속 실패 시 관리자에게 알림

**모니터링**:
- Cron Job 실행 로그
- 성공/실패한 결제 건수
- 평균 처리 시간

### 7.4 대시보드 및 분석 목록

#### 7.4.1 대시보드 화면
**분석 내역 없음**:
- "아직 검사 이력이 없습니다. 첫 검사를 시작해보세요!" 메시지
- "새 검사하기" 버튼

**분석 내역 있음**:
- 분석 목록 카드 형태로 표시
  - 이름
  - 분석 날짜
  - 간략한 요약
- 검색 기능 (이름으로 검색)
- 정렬 기능 (최신순/오래된순)

### 7.5 랜딩페이지 (홈)

#### 7.5.1 구성 섹션
1. **히어로 섹션**
   - 메인 카피: "AI가 분석하는 나의 사주"
   - 서브 카피: "Google Gemini 기반, 전문적이고 상세한 사주 분석"
   - CTA: "무료로 시작하기" 버튼

2. **서비스 특징**
   - AI 기반 정확한 분석
   - 합리적인 가격 (무료 3회, Pro 3,900원)
   - 분석 내역 보관 및 관리
   - 간편한 Google 로그인

3. **요금제 비교**
   | 구분 | Free | Pro |
   |------|------|-----|
   | 가격 | 0원 | 3,900원/월 |
   | 분석 횟수 | 3회 (최초) | 10회/월 |
   | AI 모델 | Gemini Flash | Gemini Pro |
   | 분석 품질 | 기본 | 상세 |
   | CTA | "시작하기" | "Pro 시작하기" |

4. **FAQ (자주 묻는 질문)**
   - Q: 무료 체험은 몇 번까지 가능한가요?
     A: 최초 가입 시 3회까지 무료로 이용 가능합니다.

   - Q: Pro 구독은 어떻게 결제하나요?
     A: 토스페이먼츠를 통해 카드 결제가 가능합니다.

   - Q: 출생 시간을 모르면 분석이 불가능한가요?
     A: 출생 시간 미상 시 삼주(三柱) 기반으로 분석이 진행됩니다.

   - Q: 구독을 취소하면 환불이 되나요?
     A: 구독 후 환불은 불가하며, 취소 시 다음 결제일까지 서비스 이용 가능합니다.

   - Q: 과거 검사 내역을 확인할 수 있나요?
     A: 대시보드에서 모든 분석 내역을 확인하고 검색할 수 있습니다.

   - Q: Gemini Flash와 Pro 모델의 차이는 무엇인가요?
     A: Pro 모델은 더 깊이 있고 상세한 분석을 제공합니다.

5. **탐색 메뉴**
   - 홈
   - 서비스
   - 가격
   - FAQ
   - 우측: "이용하기" 또는 "로그인" 버튼

## 8. 기술 요구사항

### 8.1 기술 스택
- **프론트엔드**: Next.js 14.x (App Router)
- **인증**: Clerk SDK (`@clerk/nextjs`)
- **결제**: 토스페이먼츠 SDK (`@tosspayments/payment-widget-sdk`)
- **AI**: Google Gemini API (`gemini-2.5-flash`, `gemini-2.5-pro`)
- **데이터베이스**: Supabase
- **배포**: Vercel (권장)

### 8.2 필수 연동 요소
1. **Clerk**
   - Google OAuth 로그인
   - Webhook (`user.created`, `user.updated`, `user.deleted`)
   - 미들웨어를 통한 라우트 보호

2. **토스페이먼츠**
   - 결제 위젯 SDK
   - API (결제 승인, 빌링키 관리, 환불)
   - Webhook (결제 상태 동기화)

3. **Gemini API**
   - 프롬프트 엔지니어링 (사주 분석 전문가 페르소나)
   - 모델 선택 로직 (Flash/Pro)
   - 스트리밍 응답 처리 (선택사항)

4. **Supabase**
   - 사용자 테이블 (`users`)
   - 분석 테이블 (`analyses`)
   - 결제 테이블 (`payments`)
   - 빌링키 테이블 (`billing_keys`)
   - Cron Job (정기결제 자동화)

### 8.3 환경 변수
```env
# Clerk
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=
CLERK_SECRET_KEY=
CLERK_WEBHOOK_SECRET=

# Toss Payments
NEXT_PUBLIC_TOSS_PAYMENTS_CLIENT_KEY=
TOSS_PAYMENTS_SECRET_KEY=
TOSS_PAYMENTS_WEBHOOK_SECRET=

# Gemini API
GOOGLE_GEMINI_API_KEY=

# Supabase
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_ANON_KEY=
SUPABASE_SERVICE_ROLE_KEY=

# Cron Job (for recurring payments)
CRON_SECRET=
```

## 9. 비기능적 요구사항

### 9.1 성능
- 페이지 로드 시간: 3초 이내
- Gemini API 응답 대기 시간: 로딩 UI로 사용자 경험 개선
- 분석 결과 생성 시간: 30초 이내 (타임아웃 60초)

### 9.2 보안
- 모든 API 키는 서버 사이드에서만 사용 (`NEXT_PUBLIC_` 접두사 제외)
- Webhook 요청 서명 검증 필수
- HTTPS 통신 필수
- SQL Injection 방지 (Supabase Client 사용)

### 9.3 가용성
- 서비스 가동률: 99% 이상
- Webhook 실패 시 재시도 로직 구현
- API 호출 실패 시 사용자 친화적 에러 메시지

### 9.4 확장성
- 사용자 증가에 따른 데이터베이스 인덱싱
- Gemini API Rate Limit 모니터링
- 분석 결과 캐싱 전략 (선택사항)

## 10. Success Metrics (성공 지표)

### 10.1 핵심 지표 (KPI)
- **신규 가입자 수**: 월 1,000명 목표
- **Pro 전환율**: 무료 사용자의 10% Pro 전환
- **평균 분석 횟수**: 사용자당 월 평균 5회
- **구독 유지율**: Pro 사용자의 80% 이상 3개월 이상 유지

### 10.2 사용자 참여 지표
- **DAU/MAU 비율**: 20% 이상
- **분석 완료율**: 분석 시작 후 90% 이상 완료
- **대시보드 재방문율**: 월 2회 이상

### 10.3 비즈니스 지표
- **MRR (Monthly Recurring Revenue)**: 월 구독 수익
- **ARPU (Average Revenue Per User)**: 사용자당 평균 수익
- **Churn Rate**: 월 구독 해지율 10% 이하

### 10.4 기술 지표
- **Gemini API 응답 시간**: 평균 15초 이내
- **페이지 로드 시간**: 평균 2초 이내
- **에러율**: 1% 이하

## 11. 출시 계획

### 11.1 Phase 1 - MVP (4주)
- 인증 시스템 구축 (Clerk)
- 사주 분석 기능 (Gemini Flash)
- 기본 대시보드
- 랜딩페이지

### 11.2 Phase 2 - 결제 연동 (2주)
- 토스페이먼츠 연동
- Pro 요금제 구현
- 구독 관리 페이지

### 11.3 Phase 3 - 최적화 (2주)
- Gemini Pro 모델 통합
- 검색 기능
- 성능 최적화
- 에러 핸들링

### 11.4 Phase 4 - 출시 (1주)
- QA 및 버그 수정
- 프로덕션 배포
- 모니터링 설정

## 12. 제약사항 및 위험요소

### 12.1 제약사항
- Clerk Webhook은 배포된 상태(public URL)에서만 작동
- Gemini API Rate Limit 존재 (무료 티어 제한)
- 토스페이먼츠는 한국 카드만 지원

### 12.2 위험요소
- **Gemini API 안정성**: 분석 실패 시 재시도 로직 필요
- **결제 실패**: 사용자 알림 및 재결제 유도 필요
- **개인정보 보호**: 사주 정보는 민감 정보, GDPR/개인정보보호법 준수
- **점술 서비스 규제**: 사주 분석이 '참고용'임을 명시, 확정적 예측 금지

## 13. 참고 문서
- `/docs/requirement.md`: 상세 기능 요구사항
- `/docs/external/clerk&tosspayment.md`: Clerk 및 토스페이먼츠 연동 가이드
- `/prompt/saju-prompt.md`: Gemini API 프롬프트 설계

---

**문서 버전**: v1.0
**작성일**: 2025-10-25
**작성자**: PRD Writer Agent
**승인자**: Product Owner
**다음 리뷰 예정일**: 출시 후 1개월
