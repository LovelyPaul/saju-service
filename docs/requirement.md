# 사주 분석 서비스 기능 요구사항 (Requirements)

### 목표 : 
기본적인 사용자 정보를 바탕으로 AI 기반의 사주를 분석하여 제공하는 서비스를 만들려고 한다.

### 주의 사항 : 
최초 페이지 접근시 로그인 없이 홈 화면이 표시되며, 그 외의 다른 페이지들은 구글 인증을 통해 로그인 이후에 접근 가능하게 구현해야 한다. 

### 요구사항 : 

### 1. 인증 및 사용자 관리 (Clerk SDK 활용)

*   **Google 로그인 연동:**
    *   사용자는 Google 계정을 통해 서비스에 가입하고 로그인할 수 있습니다.
*   **프로필 관리:**
    *   사용자는 이름, 이메일 등의 프로필 정보를 조회하고 업데이트할 수 있습니다.
    *   사용자 이름(Username) 변경 기능이 제공됩니다.
    *   연결된 계정(Google) 정보를 확인할 수 있습니다.
*   **보안 설정:**
    *   사용자는 비밀번호를 설정하거나 변경할 수 있습니다.
    *   현재 로그인된 활성 기기 목록을 확인할 수 있습니다.
    *   계정 삭제 기능이 제공됩니다.
*   **인증 상태에 따른 접근 제어:**
    *   홈(랜딩페이지)을 제외한 모든 페이지(대시보드, 새 분석하기, 분석 상세보기, 구독 관리 등)는 로그인한 사용자만 접근할 수 있습니다.
*   **Clerk Webhook 연동:**
    *   Clerk Webhook을 사용하여 사용자 가입, 로그인, 구독 상태 변경 등 인증 관련 이벤트를 서비스 백엔드와 연동해야 합니다. (배포된 상태에서만 작동함)

### 2. 사주 분석 기능 (Gemini API 활용)

*   **새 분석하기:**
    *   사용자는 이름, 생년월일, 출생시간, 성별을 입력하여 새로운 사주 분석을 요청할 수 있습니다.
    *   출생시간을 모를 경우 선택할 수 있는 옵션이 제공됩니다.
    *   분석 요청 시 "AI가 분석 중입니다..."와 같은 로딩 메시지가 표시됩니다.
*   **사주 분석 보고서:**
    *   분석 완료 후, 천간지지를 포함한 상세한 사주 분석 보고서가 제공됩니다.
    *   보고서에는 개인의 특성, 재물, 건강, 연애운 등에 대한 해석이 포함되어야 합니다.
*   **Gemini API 연동:**
    *   사주 분석은 Google Gemini API(`gemini-2.5-flash` 또는 `gemini-2.5-pro`)를 기반으로 이루어집니다.

### 3. 구독 및 결제 관리 (토스페이먼츠 연동)

*   **구독 정책:**
    *   **무료 가입 유저:** 최초 3회까지 사주 분석을 무료로 이용할 수 있습니다 (모델: `gemini-2.5-flash`).
    *   **Pro 요금제 구독 고객:** 월 10회까지 사주 분석을 이용할 수 있으며, `gemini-2.5-pro` 모델을 사용합니다.
*   **Pro 요금제 업그레이드:**
    *   "Pro 요금제로 업그레이드" 페이지에서 Pro 요금제의 혜택(월 10회 분석, Gemini 2.5 Pro 모델, 3,900원/월)을 명시합니다.
    *   "지금 업그레이드하기" 버튼을 통해 결제 프로세스로 진입합니다.
    *   "주의, 구독 후 환불이 불가합니다." 문구를 명시합니다.
*   **토스페이먼츠 구독 결제:**
    *   결제는 토스페이먼츠를 통해 이루어지며, 카드 정보(카드번호, 유효기간, 비밀번호, 주민등록번호 앞 7자리)를 입력받습니다.
    *   개인/법인 카드 선택 옵션이 제공됩니다.
    *   서비스 이용 약관 및 개인정보 처리 동의 체크박스가 포함됩니다.
*   **구독 관리 페이지:**
    *   사용자의 현재 구독 정보(무료/Pro)를 표시합니다.
    *   무료 사용자의 경우 남은 검사 횟수를 표시합니다.
    *   Pro 요금제 구독 고객은 구독 취소 옵션이 제공됩니다.
    *   **구독 취소 로직:**
        *   Pro 요금제 취소 시, 다음 결제일까지 구독 상태가 유지됩니다.
        *   다음 결제일 전에 취소 상태를 취소(재구독)할 수 있습니다.
        *   구독 해지와 동시에 빌링키를 삭제해야 합니다. 다시 구독하려면 SDK를 통한 재발급이 필요합니다.

### 4. 대시보드 및 분석 목록

*   **대시보드:**
    *   사용자의 과거 사주 분석 목록을 확인할 수 있는 페이지입니다.
    *   분석 내역이 없을 경우, "아직 검사 이력이 없습니다. 첫 검사를 시작해보세요!" 메시지와 함께 "새 검사하기" 버튼이 표시됩니다.
    *   분석 내역이 있는 경우, 목록 형태로 표시되며 검색 기능을 통해 특정 분석을 찾을 수 있습니다.

### 5. 랜딩페이지 (홈)

*   **서비스 소개:** 
    *   AI(구글 Gemini) 기반의 사주 분석 서비스임을 강조합니다.
    *   무료 1회 체험 및 Pro 10회 분석 제공과 같은 핵심 혜택을 명시합니다.
*   **서비스 특징:** 
    *   AI 기반의 정확한 분석, 합리적인 가격, 분석 내역 보관 등의 서비스 특징을 설명합니다.
*   **요금제 안내:** 
    *   Free(0원)와 Pro(3,900원/월) 요금제의 혜택을 명확히 비교하여 보여줍니다.
    *   "시작하기" 및 "Pro 시작하기" 버튼을 통해 해당 요금제 선택으로 유도합니다.
*   **자주 묻는 질문 (FAQ):** 
    *   무료 체험, Pro 구독 결제, 출생 시간 미정 시 분석, 구독 취소/환불, 검사 확인, Gemini Flash/Pro 모델 차이 등 사용자들이 궁금해할 만한 질문과 답변을 제공합니다.
*   **탐색 메뉴:**
    *   홈, 서비스, 가격, FAQ 메뉴가 상단에 포함됩니다.
    *   "이용하기" 버튼 또는 로그인/가입 관련 버튼이 표시됩니다.

### 6. 일반 요구사항

*   **포함 페이지:**
    *   홈 (랜딩페이지)
    *   대시보드 (분석목록)
    *   새 분석하기
    *   분석 상세보기
    *   구독 관리
    *   계정 관리 (Clerk SDK에서 제공하는 프로필, 보안 페이지)
*   **연동 필수 요소:**
    *   인증(Google 로그인)
    *   토스페이먼츠 구독결제
    *   Gemini API 기반 사주분석
*   **기술 스택 참고:**
    *   Clerk SDK/Webhook 사용